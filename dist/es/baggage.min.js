function loadRegistry(){container.get().forEach(function(e,t){exports[t]=e})}var classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,t){for(var r=0;t.length>r;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Container=function(){function e(){classCallCheck(this,e),this.registry=new Map}return createClass(e,[{key:"get",value:function(){return this.registry}},{key:"register",value:function(e,t){switch(t){case 2:case 3:this.registerStorageObject(e,t);break;case 1:default:this.registry.set(e.constructor.name,e)}}},{key:"registerStorageObject",value:function(e,t){var r=this;if(0>[2,3].indexOf(t))throw Error("Cannot create storage for this object.");var n="bg-"+e.constructor.name,o={};if(localStorage.getItem(n)?o=JSON.parse(localStorage.getItem(n)):sessionStorage.getItem(n)&&(o=JSON.parse(sessionStorage.getItem(n))),Object.keys(o).length>0)for(var a in o)e[a]=o[a];var s=2===t?new Proxy(e,{get:function(e,t){return e[t]},set:function(t,n,o){return t[n]=o,r.setStorage(e.constructor.name,JSON.stringify(s),2),!0}}):new Proxy(e,{get:function(e,t){return e[t]},set:function(t,n,o){return t[n]=o,r.setStorage(e.constructor.name,JSON.stringify(s),3),!0}});this.setStorage(e.constructor.name,JSON.stringify(s),t),this.registry.set(e.constructor.name,s)}},{key:"setStorage",value:function(e,t,r){var n="bg-"+e;try{switch(r){case 2:sessionStorage.setItem(n,t);break;case 3:localStorage.setItem(n,t);break;default:throw"Not a storage object."}}catch(r){console.warn("Browser storage is out of space. Added oject as carry on."),sessionStorage.getItem(n)?sessionStorage.removeItem(n):localStorage.getItem(n)&&localStorage.removeItem(n),this.register(e,t,1)}}},{key:"isNameTaken",value:function(e){return this.registry.has(e)}},{key:"removeAll",value:function(){var e=0;for(this.registry.clear(),e=0;e<localStorage.length;e++)"bg-"===localStorage.key(e).substring(0,3)&&localStorage.removeItem(localStorage.key(e));for(e=0;e<sessionStorage.length;e++)"bg-"===sessionStorage.key(e).substring(0,3)&&sessionStorage.removeItem(sessionStorage.key(e))}}]),e}(),container=new Container,CarryOn=1,Checked=2,Excessive=3,Handler=function(){function e(){classCallCheck(this,e)}return createClass(e,null,[{key:"Check",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if("function"!=typeof e||new e instanceof e==!1)throw new TypeError("Incorrect type. Must be a class function.");var r=new e;if(container.isNameTaken(r.constructor.name))throw Error("A class with this name has already been checked.");if(!0===isNaN(parseInt(t))||0>[1,2,3].indexOf(t))throw new TypeError("Level must be CarryOn, Checked, or Excessive.");container.register(r,t),loadRegistry()}},{key:"Claim",value:function(){container.get().forEach(function(e,t){exports[t]=void 0}),container.removeAll()}}]),e}();loadRegistry();export{CarryOn,Checked,Excessive,Handler};
