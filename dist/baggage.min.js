!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.Baggage={})}(this,function(e){"use strict";function t(){n.get().forEach(function(t,r){e[r]=t})}var r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(){function e(e,t){for(var r=0;t.length>r;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),n=new(function(){function e(){r(this,e),this.registry=new Map}return o(e,[{key:"get",value:function(){return this.registry}},{key:"register",value:function(e,t){switch(t){case 2:case 3:this.registerStorageObject(e,t);break;case 1:default:this.registry.set(e.constructor.name,e)}}},{key:"registerStorageObject",value:function(e,t){var r=this;if(0>[2,3].indexOf(t))throw Error("Cannot create storage for this object.");var o="bg-"+e.constructor.name,n={};if(localStorage.getItem(o)?n=JSON.parse(localStorage.getItem(o)):sessionStorage.getItem(o)&&(n=JSON.parse(sessionStorage.getItem(o))),Object.keys(n).length>0)for(var s in n)e[s]=n[s];var a=2===t?new Proxy(e,{get:function(e,t){return e[t]},set:function(t,o,n){return t[o]=n,r.setStorage(e.constructor.name,JSON.stringify(a),2),!0}}):new Proxy(e,{get:function(e,t){return e[t]},set:function(t,o,n){return t[o]=n,r.setStorage(e.constructor.name,JSON.stringify(a),3),!0}});this.setStorage(e.constructor.name,JSON.stringify(a),t),this.registry.set(e.constructor.name,a)}},{key:"setStorage",value:function(e,t,r){var o="bg-"+e;try{switch(r){case 2:sessionStorage.setItem(o,t);break;case 3:localStorage.setItem(o,t);break;default:throw"Not a storage object."}}catch(r){console.warn("Browser storage is out of space. Added oject as carry on."),sessionStorage.getItem(o)?sessionStorage.removeItem(o):localStorage.getItem(o)&&localStorage.removeItem(o),this.register(e,t,1)}}},{key:"isNameTaken",value:function(e){return this.registry.has(e)}},{key:"removeAll",value:function(){var e=0;for(this.registry.clear(),e=0;e<localStorage.length;e++)"bg-"===localStorage.key(e).substring(0,3)&&localStorage.removeItem(localStorage.key(e));for(e=0;e<sessionStorage.length;e++)"bg-"===sessionStorage.key(e).substring(0,3)&&sessionStorage.removeItem(sessionStorage.key(e))}}]),e}()),s=function(){function s(){r(this,s)}return o(s,null,[{key:"Check",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if("function"!=typeof e||new e instanceof e==!1)throw new TypeError("Incorrect type. Must be a class function.");var o=new e;if(n.isNameTaken(o.constructor.name))throw Error("A class with this name has already been checked.");if(!0===isNaN(parseInt(r))||0>[1,2,3].indexOf(r))throw new TypeError("Level must be CarryOn, Checked, or Excessive.");n.register(o,r),t()}},{key:"Claim",value:function(){n.get().forEach(function(t,r){e[r]=void 0}),n.removeAll()}}]),s}();t(),e.CarryOn=1,e.Checked=2,e.Excessive=3,e.Handler=s,Object.defineProperty(e,"__esModule",{value:!0})});
